<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sinatra on Zeneffy : journal de bord</title>
    <link>http://www.zeneffy.fr/tags/sinatra/</link>
    <description>Recent content in Sinatra on Zeneffy : journal de bord</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr-fr</language>
    <lastBuildDate>Sat, 15 Oct 2011 08:21:18 +0000</lastBuildDate>
    <atom:link href="http://www.zeneffy.fr/tags/sinatra/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Scala sur Heroku</title>
      <link>http://www.zeneffy.fr/2011/10/scala-sur-heroku/</link>
      <pubDate>Sat, 15 Oct 2011 08:21:18 +0000</pubDate>
      
      <guid>http://www.zeneffy.fr/2011/10/scala-sur-heroku/</guid>
      <description>&lt;p&gt;En plein apprentissage de scala, j&amp;rsquo;ai décidé de m&amp;rsquo;intéresser au framework web &lt;a href=&#34;http://www.scalatra.org/&#34;&gt;Scalatra&lt;/a&gt; qui ressemble à &lt;a href=&#34;http://www.sinatrarb.com/&#34;&gt;Sinatra&lt;/a&gt;, mon environnement favori en Ruby. Evidemment, je souhaite pouvoir partager rapidement mes &amp;lsquo;créations&amp;rsquo; en les hébergeant sur la plate-forme &lt;a href=&#34;http://www.heroku.com/&#34;&gt;Heroku&lt;/a&gt;, devenue &lt;a href=&#34;http://blog.heroku.com/archives/2011/8/3/polyglot_platform/&#34;&gt;polyglotte&lt;/a&gt; depuis quelques semaines en supportant d&amp;rsquo;autres langages que Ruby (notamment node.js, Java, Clojure, Scala et Python).&lt;/p&gt;

&lt;p&gt;Après quelques recherches sur internet, j&amp;rsquo;ai trouvé mon bonheur sur github &lt;a href=&#34;https://gist.github.com/1209277&#34;&gt;ici&lt;/a&gt; et &lt;a href=&#34;https://github.com/mikkelbd/scalatra-hello-heroku&#34;&gt;là&lt;/a&gt;. Pour gagner du temps dans mes futurs projets, j&amp;rsquo;ai alors transformé ces informations en un template &lt;a href=&#34;https://github.com/n8han/giter8&#34;&gt;giter8&lt;/a&gt;. Giter8 est un simple outil basé sur scala et &lt;a href=&#34;https://github.com/harrah/xsbt/wiki&#34;&gt;SBT&lt;/a&gt; qui installe des templates stockés sur Github.&lt;/p&gt;

&lt;p&gt;Une fois &lt;a href=&#34;https://github.com/n8han/giter8&#34;&gt;g8&lt;/a&gt; et le &lt;a href=&#34;http://devcenter.heroku.com/articles/git&#34;&gt;gem heroku&lt;/a&gt; installés, mettre en ligne un projet scalatra devient alors très simple:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;g8 jraigneau/scalatra-sbt-heroku.g8
cd monProjet
git init
git add . (conseil: pensez à mettre les répertoires de compilation (target) dans votre fichier .gitignore avant...)
git commit -m &amp;quot;Premier commit&amp;quot;
heroku create monProjet --stack cedar
git push heroku master
heroku open
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Et voilà, votre navigateur s&amp;rsquo;ouvre sur la nouvelle application !&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Pow &amp; Radiant</title>
      <link>http://www.zeneffy.fr/2011/06/pow-radiant/</link>
      <pubDate>Tue, 14 Jun 2011 20:51:30 +0000</pubDate>
      
      <guid>http://www.zeneffy.fr/2011/06/pow-radiant/</guid>
      <description>&lt;p&gt;J&amp;rsquo;ai découvert dernièrement le serveur de développement &lt;a href=&#34;http://pow.cx/&#34;&gt;Pow&lt;/a&gt; qui permet très simplement de mettre en place un serveur Rack (pour les applications Ruby comme &lt;a href=&#34;http://www.sinatrarb.com/&#34;&gt;sinatra&lt;/a&gt; ou &lt;a href=&#34;http://rubyonrails.org/&#34;&gt;Rails&lt;/a&gt;) sur un Mac sans aucune configuration.&lt;/p&gt;

&lt;p&gt;Par contre il peut réserver quelques surprises de configuration, notamment avec &lt;a href=&#34;http://radiantcms.org/&#34;&gt;Radiant&lt;/a&gt;. Deux points à retenir (en tout cas jusqu&amp;rsquo;à présent:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Il faut désactiver le cache en développement sinon cela provoque des erreurs aléatoires de chargement des pages - dans &lt;code&gt;config/environements/development.rb&lt;/code&gt; mettre &lt;code&gt;config.cache_classes = true&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Il est nécessaire d&amp;rsquo;ajouter un fichier config.ru juste pour le développement et surtout ne pas le copier en production, sinon cela empèche les contenus statiques de s&amp;rsquo;afficher (images, css et javascripts donc!) avec un fichier &lt;code&gt;config.ru&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Rails.root/config.ru
require &amp;quot;./config/environment&amp;quot;
run ActionController::Dispatcher.new
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Sinon, basé sur &lt;a href=&#34;http://nodejs.org/&#34;&gt;node.js&lt;/a&gt;, Pow est efficace et permet d&amp;rsquo;accéder à l&amp;rsquo;ensemble des applications en même temps via des url du type &lt;a href=&#34;http://monappli.dev:&#34;&gt;http://monappli.dev:&lt;/a&gt; je le recommande donc vivement pour se faciliter la vie de développeur Ruby.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nouvelle application ZenRunnin&#39;</title>
      <link>http://www.zeneffy.fr/2011/06/nouvelle-application-zenrunnin/</link>
      <pubDate>Sat, 11 Jun 2011 12:40:09 +0000</pubDate>
      
      <guid>http://www.zeneffy.fr/2011/06/nouvelle-application-zenrunnin/</guid>
      <description>&lt;p&gt;Coureur amateur, je me suis acheté à Noël une montre Polar pour mesurer mes performances (temps, distance&amp;hellip;) - j&amp;rsquo;ai commencé à utiliser le logiciel fourni (polarpersonaltrainer), sans être convaincu par son ergonomie ou ses fonctionnalités.&lt;/p&gt;

&lt;p&gt;Bricoleur numérique dans l&amp;rsquo;âme , j&amp;rsquo;ai donc développé le site &lt;a href=&#34;http://zenrunn.in&#34;&gt;Zenrunnin’&lt;/a&gt;, une application simple de suivi de vos courses, utilisant les comptes facebook pour partager ses performances avec ses amis et connaître les leurs.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://zenrunn.in&#34;&gt;Zenrunnin’&lt;/a&gt; m&amp;rsquo;a permis de me familiariser avec les différentes &lt;a href=&#34;http://developers.facebook.com/&#34;&gt;API Facebook&lt;/a&gt; et m&amp;rsquo;a fait découvrir &lt;a href=&#34;http://oauth.net/&#34;&gt;OAuth&lt;/a&gt; qui permet d&amp;rsquo;interagir et de publier facilement des données sécurisées à travers un système simple et unifié d&amp;rsquo;autorisation.&lt;/p&gt;

&lt;p&gt;Pour en savoir plus:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Le site ZenRunnin&amp;rsquo;: &lt;a href=&#34;http://zenrunn.in&#34;&gt;zenrunn.in&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Le site de développement sur &lt;a href=&#34;https://github.com/jraigneau/zen-running&#34;&gt;Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Le site communautaire de l&amp;rsquo;application sur facebook: &lt;a href=&#34;http://www.facebook.com/apps/application.php?id=216410101715370&#34;&gt;www.facebook.com/apps/application.php?id=216410101715370&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Les joies de datamapper</title>
      <link>http://www.zeneffy.fr/2011/04/les-joies-de-datamapper/</link>
      <pubDate>Sun, 24 Apr 2011 18:55:40 +0000</pubDate>
      
      <guid>http://www.zeneffy.fr/2011/04/les-joies-de-datamapper/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://datamapper.org/&#34;&gt;Datamapper&lt;/a&gt; est un ORM (&lt;a href=&#34;http://en.wikipedia.org/wiki/Object-relational_mapping&#34;&gt;Object Relational Mapper&lt;/a&gt;) écrit en ruby et permettant de lier facilement Ruby à n&amp;rsquo;importe quelle base de données (mysql, postgresql&amp;hellip;).&lt;/p&gt;

&lt;p&gt;Grand fan de du framework web &lt;a href=&#34;http://www.sinatrarb.com/&#34;&gt;Sinatra&lt;/a&gt;, j&amp;rsquo;utilise souvent datamapper&amp;hellip;et je tombe souvent dans ses pièges:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Etre vigilant sur les relations 1-n ou n-n et sur l&amp;rsquo;utilisation des objets pour éviter de charger en mémoire des centaines de données inutiles (cela m&amp;rsquo;est arrivé sur Veilleur, voir le &lt;a href=&#34;http://www.zeneffy.fr/2011/03/rtfm&#34;&gt;post correspondant&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Vérifier systématiquement que les données sont bien sauvegardées: par défaut (c&amp;rsquo;est à dire sans l&amp;rsquo;option &lt;code&gt;#DataMapper::Model.raise_on_save_failure = true&lt;/code&gt;), aucun message ne prévient de l&amp;rsquo;erreur&lt;/li&gt;
&lt;li&gt;Mettre en place un système de pour récupérer les erreurs envoyées par Datamapper via notamment: &lt;code&gt;xx.errors.inspect&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ces quelques points simples permettent de gagner beaucoup de temps!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Application Sinatra pour Heroku</title>
      <link>http://www.zeneffy.fr/2011/02/application-sinatra-pour-heroku/</link>
      <pubDate>Sat, 05 Feb 2011 07:50:50 +0000</pubDate>
      
      <guid>http://www.zeneffy.fr/2011/02/application-sinatra-pour-heroku/</guid>
      <description>&lt;p&gt;Dernièrement je m&amp;rsquo;intéresse au framework de développement  &lt;a href=&#34;http://www.sinatrarb.com/&#34;&gt;sinatra&lt;/a&gt; qui est basé sur le langage Ruby (comme Ruby on Rails donc). Sinatra est un &lt;a href=&#34;http://fr.wikipedia.org/wiki/Domain-specific_programming_language&#34;&gt;DSL&lt;/a&gt; permettant de développer rapidement et simplement des applications web (un peu comme &lt;a href=&#34;http://webpy.org/&#34;&gt;webpy&lt;/a&gt; que j&amp;rsquo;avais utilisé sur &lt;a href=&#34;https://github.com/jraigneau/Harpagon&#34;&gt;Harpagon&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Pour déployer des applications sinatra, j&amp;rsquo;ai décidé de continuer à m&amp;rsquo;appuyer sur la plate-forme d&amp;rsquo;hébergement &lt;a href=&#34;http://heroku.com/&#34;&gt;Heroku&lt;/a&gt; - voila les quelques fichiers à mettre en oeuvre pour une application minimale - en activant la supervision &lt;a href=&#34;http://newrelic.com/&#34;&gt;newrelic_rpm&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;heroku-sinatra-app.rb&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;require &#39;rubygems&#39;
require &#39;sinatra&#39;

configure :production do
require &#39;newrelic_rpm&#39;
end

# Quick test
get &#39;/&#39; do
&amp;quot;Hello from the ratpack!&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;config.ru&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;require &#39;heroku-sinatra-app&#39;
run Sinatra::Application
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;.gems&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sinatra
newrelic_rpm version
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;newrelic.yml&lt;/em&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# here are the settings that are common to all environments
common: &amp;amp;default_settings
  license_key: &amp;quot;&amp;lt;%= ENV[&#39;NEW_RELIC_LICENSE_KEY&#39;] %&amp;gt;&amp;quot;
  app_name: &amp;quot;&amp;lt;%= ENV[&#39;NEW_RELIC_APPNAME&#39;] %&amp;gt;&amp;quot;
  monitor_mode: false
  developer_mode: false
  log_level: info
  apdex_t: 0.5
  capture_params: false
  transaction_tracer:
    enabled: false
  error_collector:
    enabled: false

production:
  &amp;lt;&amp;lt;: *default_settings
  monitor_mode: true
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Il suffit ensuite de pousser ces fichiers via Git sur Heroku et de visiter l&amp;rsquo;url de votre application!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>